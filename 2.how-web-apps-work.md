# How Web Applications Work
Web apps communicate using the **HTTP Protocol** (Layer 7 Application in the OSI model).

This communication protocol is between the server and the client, that wants to request a specific resource from the server. A _HTTP Request_ is sent to the server, and the server answer with an _HTTP Response_ back to the client after activating certain controls and processes:

## HTTP Request
Requests are used to retrieve specific resource from a web server. The web server's job is to process the response received and present that resource to the user. The request must have a specific format, otherwise it will not be recognize and it will be perceived as an error.

The request structure consist of 3 main parts: Request line, Request Headers, and Request Message Body. 

- `Request Line`: Consists in a *HTTP Method (GET, POST, UPDATE, etc)* and the resource requested from the web server: ` GET / HTTP /1.1` (The / means that the main page is being requested).
- `Request Headers`: List of different parameters used to identify the request. 
	- Host Header: Modern web apps usually belong to more than one domain, therefore the *"Host"* header to identify which domain requested the resource. `(letsdefend.io)`
	- Cookie Header: Web applications often store information on the client's device using "cookies", these typically store session information to make the user's flow much smoother.
	- Upgrade-Insecure-Requests Header: Indicates if the client wants to communicate using encryption (SSL).`(Usually 1)`
	- User-Agent Header: Information about the client's browser and OS. Web server will use this information to send specific HTTP responses to the client.`(Mozilla/5.0 (Windows NT 10.0; Win64; x64)Chrome/97.0.4692.71)`
	- Accept Heaeder: Here the type of data requested is specified `(text/html,application/xhtml+xml,application/xml;q=0.9,image/avif)`
	- Accept-Encoding Header: The type of encoding supported by the client, specified as compression algorithms. `(gzip, deflate)`
	- Accept-Language Header: It's the client's language information, this will affect how the web server displays the prepared content in that specific language. `(en-US, en;q=0.9)`.
	- Connection Header: This header shows how the HTTP connection is made. If is "close", the TCP connection will be closed after receiving the HTTP resonse. If is "keep-alive", the connection will be maintained. `(close)`
  - Closing the *Request Headers* is done with an empty line to separate sections.
- `Request Message Body`: Remaining data to be sent will be specified in the Request Message Body. If the method POST is used, its parameters can be found here.

## HTTP Response
Once the request is received by the web server, it checks and process the information and sends a Response with the requested resource. Depending on the type of resource asked different types of processes will be executed by the web server, but no matter what a `Response message` must reach the client after all the processing.

Typically, a HTTP Response will be composed of a `Status Line`, `Response Headers`, and a `Response Body`.

- `Status Line`: Contains the status code and the HTTP protocol information `(HTTP/1.1 200 OK)`.
- `Response Headers`: 
  - Date: Current date where the response was generated
	- Connection: Shows the HTTP connection status and whether the network should be kept open for subsequent requests
	- Server: Identifies the server sofware handling the request
	- Last-Modified: Indicates the last modification date of the resource
	- Content-Type: Specifies the media type of the resource in the response
	- Content-Length: Indicates the size of the response body in bytes

- `Response Body`: Contains the information about the requested resource. `(if a web page has been requested, HTML file will be found in the Response Body)`.

### Status Line
The HTTP protocol uses different **Status Codes** to give additional information about the status of the request. There are plenty of status codes, but can be summarized as follows:
- 100-199: Informational responses
- 200-299: Successful responses
- 300-399: Redirection messages
- 400-499: Client error responses
- 500-599: Server error responses


